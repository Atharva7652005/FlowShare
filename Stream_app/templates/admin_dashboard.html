{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Admin Dashboard | Streamify</title>
    <link rel="stylesheet" href="{% static 'css/dashboard.css' %}">
</head>
<body>
    <nav class="navbar">
        <div class="nav-brand">Streamify Admin</div>
        <button onclick="window.location.href='{% url 'logout' %}'" class="btn logout nav-btn">Logout</button>
    </nav>
    <div class="container">
        <h1 class="brand">Admin Dashboard</h1>
        <div class="overview">
            <p>Total Users: {{ total_users }}</p>
            <p>Total Storage Rooms: {{ total_rooms }}</p>
        </div>
        <h2>Users</h2>
        <table>
            <tr><th>Username</th><th>Email</th><th>Actions</th></tr>
            {% for user in users %}
            <tr>
                <td>{{ user.username }}</td>
                <td>{{ user.email }}</td>
                <td>
                    <form method="post" action="{% url 'admin_delete_user' user.id %}">
                        {% csrf_token %}
                        <button type="submit" class="btn">Delete</button>
                    </form>
                </td>
            </tr>
            {% endfor %}
        </table>
        <h2>Storage Rooms</h2>
        <table>
            <tr><th>Room Code</th><th>Created At</th><th>Actions</th></tr>
            {% for room in rooms %}
            <tr>
                <td>{{ room.storage_code }}</td>
                <td>{{ room.created_at }}</td>
                <td>
                    <form method="post" action="{% url 'admin_delete_room' room.id %}">
                        {% csrf_token %}
                        <button type="submit" class="btn">Delete</button>
                    </form>
                </td>
            </tr>
            {% endfor %}
        </table>
    </div>
</body>
</html>
